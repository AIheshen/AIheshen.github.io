<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>艾合的个人主页</title>
    <style>
        /* CSS 样式部分与上一版完全相同 */
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #0a0a1a; color: #e0e0e0; overflow-x: hidden; }
        #canvas-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        nav { position: fixed; top: 0; left: 0; width: 100%; background: rgba(10, 10, 26, 0.7); backdrop-filter: blur(10px); z-index: 1000; padding: 10px 0; border-bottom: 1px solid rgba(0, 255, 255, 0.2); }
        nav .container { display: flex; justify-content: center; align-items: center; }
        nav ul { list-style: none; margin: 0; padding: 0; display: flex; gap: 20px; }
        nav ul li a { color: #e0e0e0; text-decoration: none; font-size: 1rem; padding: 10px 15px; border-radius: 5px; transition: background 0.3s ease, color 0.3s ease; cursor: pointer; }
        nav ul li a:hover, nav ul li a.active { background: rgba(0, 255, 255, 0.1); color: #00ffff; }
        .container { max-width: 960px; margin: 0 auto; padding: 0 20px; }
        .main-content { padding-top: 80px; }
        .section { display: none; min-height: calc(100vh - 80px); flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 40px 0; animation: fadeIn 0.8s; }
        .section.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .profile-img { width: 180px; height: 180px; border-radius: 50%; border: 5px solid rgba(255, 255, 255, 0.8); object-fit: cover; box-shadow: 0 0 30px rgba(0, 255, 255, 0.5); transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .profile-img:hover { transform: scale(1.1); box-shadow: 0 0 50px rgba(0, 255, 255, 0.8); }
        h1 { font-size: 4rem; margin: 20px 0 10px; color: #fff; letter-spacing: 3px; text-shadow: 0 0 15px rgba(255, 255, 255, 0.5); }
        .subtitle { font-size: 1.5rem; color: #00ffff; margin: 0; font-weight: 300; }
        #about h2, #projects h2, #contact h2 { font-size: 3rem; color: #fff; margin-bottom: 40px; position: relative; }
        #about h2::after, #projects h2::after, #contact h2::after { content: ''; width: 80px; height: 4px; background: #00ffff; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%); }
        .about-content { display: flex; align-items: center; gap: 40px; text-align: left; }
        .about-text { flex: 2; font-size: 1.1rem; line-height: 1.8; }
        .project-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; width: 100%; }
        .project-card { background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 20px; border: 1px solid rgba(255, 255, 255, 0.1); transition: transform 0.3s ease, background 0.3s ease; backdrop-filter: blur(10px); }
        .project-card:hover { transform: translateY(-10px); background: rgba(255, 255, 255, 0.1); }
        .project-card h3 { color: #00ffff; }
        .project-card a { color: #00ffff; text-decoration: none; font-weight: bold; }
        .social-links { list-style: none; padding: 0; display: flex; gap: 25px; margin-top: 20px; }
        .social-links li a { font-size: 2.5rem; color: #fff; transition: color 0.3s ease, text-shadow 0.3s ease; }
        .social-links li a:hover { color: #00ffff; text-shadow: 0 0 20px #00ffff; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <!-- Canvas 容器，p5.js 将在这里创建背景 -->
    <div id="canvas-bg"></div>

    <!-- 导航和主要内容部分保持不变 -->
    <nav>
        <div class="container">
            <ul>
                <li><a href="#hero" class="nav-link active">主页</a></li>
                <li><a href="#about" class="nav-link">关于我</a></li>
                <li><a href="#projects" class="nav-link">我的项目</a></li>
                <li><a href="#contact" class="nav-link">联系我</a></li>
            </ul>
        </div>
    </nav>
    <div class="main-content">
        <section id="hero" class="section active">
            <img src="IMG_20250810_032653.png" alt="头像" class="profile-img">
            <h1>你好，我是艾合</h1>
            <p class="subtitle">一位充满热情的编程爱好者</p>
        </section>
        <section id="about" class="section">
             <div class="container"><h2>关于我...</h2></div>
        </section>
        <section id="projects" class="section">
             <div class="container"><h2>我的项目...</h2></div>
        </section>
        <section id="contact" class="section">
             <div class="container"><h2>联系我...</h2></div>
        </section>
    </div>

    <!-- 1. 引入 p5.js 库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    
    <!-- 2. p5.js 粒子系统脚本 -->
    <script>
        // --- 可调参数 ---
        const PARTICLE_COUNT = 150;     // 粒子总数 (可根据性能调整)
        const REPULSION_RADIUS = 150;   // 鼠标排斥力场的半径
        const REPULSION_STRENGTH = 1.5; // 排斥力的强度 (数值越大，推力越强)
        const CONNECTION_DISTANCE = 120; // 粒子之间连线的最大距离
        // --- 参数结束 ---

        let particles = [];
        let canvas;

        // p5.js 的初始化函数，只运行一次
        function setup() {
            canvas = createCanvas(windowWidth, windowHeight);
            canvas.parent('canvas-bg'); // 将 canvas 放入我们指定的 div 中
            for (let i = 0; i < PARTICLE_COUNT; i++) {
                particles.push(new Particle());
            }
        }

        // p5.js 的绘图函数，每秒约运行 60 次
        function draw() {
            background(10, 10, 26);
            let mouse = createVector(mouseX, mouseY);

            // 遍历所有粒子，更新状态并绘制
            for (let p of particles) {
                p.repel(mouse);
                p.update();
                p.edges();
                p.display();
            }

            // 绘制粒子间的连接线
            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    let dist = p5.Vector.dist(particles[i].pos, particles[j].pos);
                    if (dist < CONNECTION_DISTANCE) {
                        let alpha = map(dist, 0, CONNECTION_DISTANCE, 200, 0);
                        stroke(255, alpha);
                        strokeWeight(0.5);
                        line(particles[i].pos.x, particles[i].pos.y, particles[j].pos.x, particles[j].pos.y);
                    }
                }
            }
        }

        // 窗口大小改变时，重设画布大小
        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }

        // 定义“粒子”这个对象
        class Particle {
            constructor() {
                this.pos = createVector(random(width), random(height));
                this.vel = p5.Vector.random2D().mult(random(0.5, 1.5));
                this.acc = createVector(0, 0);
                this.maxSpeed = 2;
                this.color = 255;
                this.size = random(1.5, 3);
            }

            // 核心：计算并施加排斥力
            repel(target) {
                let force = p5.Vector.sub(this.pos, target);
                let distance = force.mag();
                if (distance < REPULSION_RADIUS) {
                    // 距离越近，力越大 (反比关系)
                    let strength = REPULSION_STRENGTH * (REPULSION_RADIUS - distance) / REPULSION_RADIUS;
                    force.setMag(strength);
                    this.applyForce(force);
                }
            }

            // 将力施加到加速度上
            applyForce(force) {
                this.acc.add(force);
            }

            // 更新粒子的位置
            update() {
                this.vel.add(this.acc);
                this.vel.limit(this.maxSpeed);
                this.pos.add(this.vel);
                this.acc.mult(0); // 每帧重置加速度
            }

            // 绘制粒子
            display() {
                stroke(this.color);
                strokeWeight(this.size);
                point(this.pos.x, this.pos.y);
            }

            // 边界处理：穿墙效果
            edges() {
                if (this.pos.x > width) this.pos.x = 0;
                if (this.pos.x < 0) this.pos.x = width;
                if (this.pos.y > height) this.pos.y = 0;
                if (this.pos.y < 0) this.pos.y = height;
            }
        }
    </script>
    
    <!-- 3. 导航菜单切换逻辑 (保持不变) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.section');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navLinks.forEach(item => item.classList.remove('active'));
                    sections.forEach(sec => sec.classList.remove('active'));
                    link.classList.add('active');
                    const targetId = link.getAttribute('href').substring(1);
                    document.getElementById(targetId).classList.add('active');
                });
            });
        });
    </script>
</body>
</html>
