<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>矩阵核心 · 个人空间</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            background:#000;
            color:#0f0;
            font-family:'Courier New',monospace;
            overflow:hidden;
            min-height:100vh;
            position:relative;
            cursor:none;
        }
        canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-2}
        .matrix-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;opacity:0.3}
        .container{max-width:1200px;margin:0 auto;padding:2rem;position:relative;z-index:10}
        header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 0;border-bottom:1px dashed #0f0}
        .logo{
            font-size:2rem;font-weight:bold;
            background:linear-gradient(90deg,#0f0,#0ff,#f0f);
            -webkit-background-clip:text;background-clip:text;color:transparent;
            text-shadow:0 0 20px #0f0,0 0 40px #0f0;
            animation:pulse 2s infinite;
        }
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.7}}
        nav ul{display:flex;list-style:none;gap:2rem}
        nav a{color:#0f8;text-decoration:none;transition:.3s;font-weight:bold}
        nav a:hover{color:#0ff;text-shadow:0 0 10px #0ff}
        .hero{text-align:center;padding:6rem 0}
        h1{
            font-size:4rem;margin-bottom:1rem;
            background:linear-gradient(90deg,#0f0,#0ff,#f0f,#0ff,#0f0);
            -webkit-background-clip:text;background-clip:text;color:transparent;
            text-shadow:0 0 30px #0f0,0 0 60px #0f0,0 0 90px #0f0;
            animation:holo 3s infinite;
            letter-spacing:3px;
        }
        @keyframes holo{
            0%{text-shadow:0 0 30px #0f0,0 0 60px #0f0}
            50%{text-shadow:0 0 40px #0ff,0 0 80px #0ff}
            100%{text-shadow:0 0 30px #f0f,0 0 60px #f0f}
        }
        .tagline{font-size:1.6rem;margin:2rem 0;color:#0f8;text-shadow:0 0 10px #0f0}
        .btn{
            display:inline-block;background:rgba(0,255,0,.1);color:#0f0;
            border:1px solid #0f0;padding:.8rem 2rem;border-radius:0;
            text-decoration:none;transition:.3s;margin:0 .5rem;
            box-shadow:0 0 15px rgba(0,255,0,.3);
            font-weight:bold;letter-spacing:1px;
        }
        .btn:hover{
            background:rgba(0,255,255,.2);color:#0ff;
            box-shadow:0 0 30px rgba(0,255,255,.6);
            text-shadow:0 0 10px #0ff;
        }
        .about{display:grid;grid-template-columns:1fr 2fr;gap:3rem;margin:5rem 0;align-items:center}
        .profile-img{
            width:100%;border-radius:50%;border:3px solid #0f0;
            box-shadow:0 0 40px #0f0,0 0 80px #0f0;filter:drop-shadow(0 0 20px #0f0);
            animation:spin 20s linear infinite;
        }
        @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
        .about-text h2{font-size:2.2rem;margin-bottom:1.5rem;color:#0ff;text-shadow:0 0 15px #0ff}
        .about-text p{line-height:1.8;margin-bottom:1.5rem;font-size:1.1rem;color:#0f8}
        .skills,.projects{margin:5rem 0}
        .skills h2,.projects h2{text-align:center;font-size:2.2rem;margin-bottom:3rem;color:#0ff;text-shadow:0 0 20px #0ff}
        .skills-grid,.project-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem}
        .skill-card,.project-card{
            background:rgba(0,20,0,.5);padding:2rem;border:1px solid #0f0;
            border-radius:0;transition:.3s;position:relative;overflow:hidden;
        }
        .skill-card::before,.project-card::before{
            content:'';position:absolute;top:0;left:-100%;width:50%;height:100%;
            background:linear-gradient(90deg,transparent,rgba(0,255,0,.1),transparent);
            transition:.5s;
        }
        .skill-card:hover::before,.project-card:hover::before{left:100%}
        .skill-card:hover,.project-card:hover{
            box-shadow:0 0 30px #0f0,0 0 60px #0f0;
            transform:translateY(-8px) scale(1.02);
        }
        .project-img{
            width:100%;height:200px;background:linear-gradient(45deg,#001,#0f0);
            display:flex;align-items:center;justify-content:center;color:#000;font-weight:bold;
            text-shadow:0 0 10px #0f0;
        }
        footer{text-align:center;padding:2rem;margin-top:5rem;border-top:1px dashed #0f0}
        .social-links{display:flex;justify-content:center;gap:2rem;margin-top:1.5rem}
        .social-links a{color:#0f8;font-size:1.6rem;transition:.3s}
        .social-links a:hover{color:#0ff;text-shadow:0 0 15px #0ff}
        .cursor{
            position:fixed;width:20px;height:20px;border:2px solid #0ff;
            border-radius:50%;pointer-events:none;z-index:9999;
            box-shadow:0 0 20px #0ff,0 0 40px #0ff;transform:translate(-50%,-50%);
            transition:0.1s;
        }
        .ripple{
            position:fixed;pointer-events:none;border-radius:50%;
            background:rgba(0,255,255,.3);transform:translate(-50%,-50%);
            animation:ripple 1s ease-out forwards;
            box-shadow:0 0 30px #0ff;
        }
        @keyframes ripple{
            0%{width:0;height:0;opacity:1}
            100%{width:600px;height:600px;opacity:0}
        }
        .scanline{
            position:fixed;top:0;left:0;width:100%;height:4px;
            background:linear-gradient(90deg,transparent,#0f0,transparent);
            animation:scan 3s linear infinite;
            pointer-events:none;z-index:5;
        }
        @keyframes scan{0%{transform:translateY(-100%)}100%{transform:translateY(100vh)}}
        .fault{
            position:fixed;top:0;left:0;width:100%;height:100%;
            background:linear-gradient(90deg,transparent 48%,rgba(255,0,255,.1) 50%,transparent 52%);
            pointer-events:none;opacity:0;animation:fault 4s infinite;
        }
        @keyframes fault{0%,100%{opacity:0;transform:translateX(0)}50%{opacity:1;transform:translateX(2px)}}

        /* AI 终端 */
        #ai-terminal{
            position: fixed; bottom: 20px; right: 20px; 
            width: 380px; height: 500px;
            background: rgba(0,15,0,0.9); 
            border: 1px solid #0f0; 
            box-shadow: 0 0 30px #0f0, 0 0 60px #0f0;
            font-family: 'Courier New', monospace;
            color: #0f0; font-size: 14px;
            display: none; flex-direction: column;
            z-index: 9999; border-radius: 0;
            backdrop-filter: blur(4px);
        }
        #ai-terminal-header{
            padding:8px; border-bottom:1px dashed #0f0; display:flex; justify-content:space-between; align-items:center;
        }
        #ai-output{flex:1; padding:10px; overflow-y:auto; line-height:1.6;}
        #ai-input-area{display:flex; border-top:1px dashed #0f0;}
        #ai-input{flex:1; padding:10px; background:transparent; border:none; color:#0f0; outline:none;}
        #ai-send-btn{padding:0 15px; background:#0f0; color:#000; border:none; cursor:pointer; font-weight:bold;}
        #ai-open-btn{
            position:fixed; bottom:20px; right:20px; width:50px; height:50px; 
            background:#0f0; border-radius:50%; box-shadow:0 0 30px #0f0;
            display:flex; align-items:center; justify-content:center; cursor:pointer;
            font-weight:bold; color:#000; font-size:18px; z-index:9998;
        }
        @media(max-width:768px){
            h1{font-size:2.8rem}
            .about{grid-template-columns:1fr;text-align:center}
            .profile-img{max-width:250px;margin:0 auto}
            #ai-terminal{width:90%;left:5%;right:5%;height:60vh;}
        }
    </style>
</head>
<body>
    <canvas id="bg"></canvas>
    <canvas class="matrix-canvas" id="matrix"></canvas>
    <div class="scanline"></div>
    <div class="fault"></div>
    <div class="cursor" id="cursor"></div>

    <div class="container">
        <header>
            <div class="logo">NEURAL CORE</div>
            <nav>
                <ul>
                    <li><a href="#home">HOME</a></li>
                    <li><a href="#about">ABOUT</a></li>
                    <li><a href="#skills">SKILLS</a></li>
                    <li><a href="#projects">PROJECTS</a></li>
                    <li><a href="#contact">CONTACT</a></li>
                </ul>
            </nav>
        </header>

        <section class="hero" id="home">
            <h1>欢迎进入矩阵</h1>
            <p class="tagline">开发者 · 未来架构师 · 代码即现实</p>
            <div>
                <a href="#about" class="btn">ACCESS PROFILE</a>
                <a href="#contact" class="btn">INITIATE LINK</a>
            </div>
        </section>

        <section class="about" id="about">
            <div><img src="https://via.placeholder.com/400x400/000/0f0?text=AVATAR" alt="头像" class="profile-img"></div>
            <div class="about-text">
                <h2>SYSTEM PROFILE</h2>
                <p>我是矩阵中的觉醒者，专注于构建高效、优雅的数字现实。精通前端与后端，致力于将复杂逻辑转化为直观交互。</p>
                <p>我探索 Web3、AI、XR 与元宇宙技术，相信代码是通往新世界的钥匙。</p>
                <p>在数字世界中，我是架构师、是黑客、是创造者。</p>
            </div>
        </section>

        <section class="skills" id="skills">
            <h2>CORE MODULES</h2>
            <div class="skills-grid">
                <div class="skill-card"><h3>FRONTEND</h3><p>React, Vue, Three.js, WebGL, Tailwind</p></div>
                <div class="skill-card"><h3>BACKEND</h3><p>Node.js, Python, GraphQL, WebSocket</p></div>
                <div class="skill-card"><h3>AI & DATA</h3><p>TensorFlow, PyTorch, D3.js, NLP</p></div>
                <div class="skill-card"><h3>FUTURE TECH</h3><p>Web3, AR/VR, Blockchain, IoT</p></div>
            </div>
        </section>

        <section class="projects" id="projects">
            <h2>PROJECT VAULT</h2>
            <div class="project-grid">
                <div class="project-card"><div class="project-img">NEURAL NET</div><div class="project-content"><h3>AI 神经网络可视化</h3><p>实时渲染千万级神经元连接</p></div></div>
                <div class="project-card"><div class="project-img">HOLO UI</div><div class="project-content"><h3>全息交互界面</h3><p>WebGL + 手势识别</p></div></div>
                <div class="project-card"><div class="project-img">CYBER OS</div><div class="project-content"><h3>浏览器内操作系统</h3><p>完整文件系统 + 终端</p></div></div>
            </div>
        </section>

        <footer id="contact">
            <p>© 2025 NEURAL CORE | ALL REALITIES RESERVED</p>
            <div class="social-links">
                <a href="#">GITHUB</a><a href="#">LINKEDIN</a><a href="#">TWITTER</a><a href="#">EMAIL</a>
            </div>
        </footer>
    </div>

    <!-- AI 终端 -->
    <div id="ai-terminal">
        <div id="ai-terminal-header">
            <span style="font-weight:bold; text-shadow:0 0 10px #0f0;">NEURAL AI CORE</span>
            <button onclick="document.getElementById('ai-terminal').style.display='none'" 
                    style="background:none; border:none; color:#0f0; cursor:pointer; font-size:18px;">×</button>
        </div>
        <div id="ai-output">
            <div style="color:#0f8;">> AI 已就绪。输入任意问题。</div>
        </div>
        <div id="ai-input-area">
            <input type="text" id="ai-input" placeholder="> 向矩阵提问..." 
                   onkeypress="if(event.key==='Enter') sendSparkAI()">
            <button id="ai-send-btn" onclick="sendSparkAI()">SEND</button>
        </div>
    </div>
    <div id="ai-open-btn" onclick="document.getElementById('ai-terminal').style.display='flex'">AI</div>

    <!-- 所有 JS 内联在此 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        // ==================== 粒子系统 + 数字雨 + 鼠标 ====================
        const canvas = document.getElementById('bg');
        const ctx = canvas.getContext('2d');
        let w, h, particles = [], mouse = {x: 0, y: 0, down: false};

        function resize() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        }
        resize();
        window.addEventListener('resize', resize);

        class Particle {
            constructor(x, y) {
                this.x = x; this.y = y;
                this.z = Math.random() * 500 + 100;
                this.color = Math.random() < 0.5 ? '#0f0' : '#0ff';
                this.size = Math.random() * 2 + 1;
                this.vx = (Math.random() - 0.5) * 0.3;
                this.vy = (Math.random() - 0.5) * 0.3;
                this.trail = [];
            }
            update() {
                this.z += (Math.random() - 0.5) * 1.5;
                if (this.z <= 0) this.z = 600;
                const scale = 600 / this.z;
                const px = (this.x - w/2) * scale + w/2;
                const py = (this.y - h/2) * scale + h/2;

                const dx = this.x - mouse.x, dy = this.y - mouse.y, dist = Math.hypot(dx, dy);
                if (dist < 200) {
                    const f = (200 - dist) / 200 * 20;
                    this.vx += dx/dist * f * 0.01;
                    this.vy += dy/dist * f * 0.01;
                }

                particles.forEach(other => {
                    if (other === this) return;
                    const odx = this.x - other.x, ody = this.y - other.y;
                    const odist = Math.hypot(odx, ody);
                    if (odist < 5 && odist > 0) {
                        const force = (5 - odist) / 5 * 0.5;
                        this.vx += (odx / odist) * force;
                        this.vy += (ody / odist) * force;
                    }
                });

                this.vx *= 0.99; this.vy *= 0.99;
                this.x += this.vx; this.y += this.vy;

                const br = 100, bs = 15;
                if (this.x < br) this.vx += ((br - this.x)/br)**0.6 * bs;
                if (this.x > w - br) this.vx -= ((this.x - (w - br))/br)**0.6 * bs;
                if (this.y < br) this.vy += ((br - this.y)/br)**0.6 * bs;
                if (this.y > h - br) this.vy -= ((this.y - (h - br))/br)**0.6 * bs;

                this.trail.push({x: px, y: py, z: this.z});
                if (this.trail.length > 4) this.trail.shift();
            }
            draw() {
                const scale = 600 / this.z;
                const px = (this.x - w/2) * scale + w/2;
                const py = (this.y - h/2) * scale + h/2;
                const size = this.size * scale;

                ctx.strokeStyle = this.color + '30';
                ctx.lineWidth = size * 0.3;
                ctx.beginPath();
                this.trail.forEach((p,i) => i===0 ? ctx.moveTo(p.x,p.y) : ctx.lineTo(p.x,p.y));
                ctx.stroke();

                const grad = ctx.createRadialGradient(px, py, 0, px, py, size*2.5);
                grad.addColorStop(0, this.color + '80');
                grad.addColorStop(1, 'transparent');
                ctx.fillStyle = grad;
                ctx.beginPath();
                ctx.arc(px, py, size*2.5, 0, Math.PI*2);
                ctx.fill();

                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(px, py, size, 0, Math.PI*2);
                ctx.fill();
            }
        }

        // 初始化粒子
        for (let i = 0; i < 500; i++) {
            const x = Math.random() * w;
            const y = Math.random() * h;
            let tooClose = false;
            for (let p of particles) {
                if (Math.hypot(x - p.x, y - p.y) < 40) { tooClose = true; break; }
            }
            if (!tooClose) particles.push(new Particle(x, y));
        }

        // 数字雨
        const matrix = document.getElementById('matrix');
        const mctx = matrix.getContext('2d');
        let mw, mh, drops = [];
        function resizeMatrix() {
            mw = matrix.width = window.innerWidth;
            mh = matrix.height = window.innerHeight;
            drops = [];
            for(let x=0;x<mw/20;x++) drops[x] = Math.random() * -mh;
        }
        resizeMatrix();
        window.addEventListener('resize', resizeMatrix);
        const chars = '01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン';
        function drawMatrix() {
            mctx.fillStyle = 'rgba(0,0,0,0.05)';
            mctx.fillRect(0,0,mw,mh);
            mctx.fillStyle = '#0f0';
            mctx.font = '16px monospace';
            for(let i=0;i<drops.length;i++){
                const text = chars[Math.floor(Math.random()*chars.length)];
                const x = i*20, y = drops[i];
                mctx.fillText(text, x, y);
                if(y > mh && Math.random()>0.975) drops[i] = 0;
                drops[i] += 20;
            }
        }

        // 鼠标
        const cursor = document.getElementById('cursor');
        document.addEventListener('mousemove', e => {
            mouse.x = e.clientX; mouse.y = e.clientY;
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });
        document.addEventListener('mousedown', e => {
            mouse.down = true;
            const ripple = document.createElement('div');
            ripple.classList.add('ripple');
            ripple.style.left = e.clientX + 'px';
            ripple.style.top = e.clientY + 'px';
            document.body.appendChild(ripple);
            setTimeout(() => ripple.remove(), 1000);
            particles.forEach(p => {
                const dx = p.x - mouse.x, dy = p.y - mouse.y, dist = Math.hypot(dx, dy);
                if(dist < 300){
                    p.vx += dx/dist * 15;
                    p.vy += dy/dist * 15;
                }
            });
        });
        document.addEventListener('mouseup', () => mouse.down = false);

        // 主循环
        function animate() {
            ctx.fillStyle = 'rgba(0,0,5,0.08)';
            ctx.fillRect(0,0,w,h);
            particles.forEach(p => {p.update();p.draw();});
            drawMatrix();
            requestAnimationFrame(animate);
        }
        animate();

        // ==================== 讯飞星火 AI 终端 ====================
        const APP_ID = 'ed57eb4c';
        const API_KEY = '2f626759992ebe73c6199e7fec72acf0';
        const API_SECRET = 'YTY5NmUxMzU3MGZiYTM4NmQ1MGJjN2Y5';

        async function sendSparkAI() {
            const input = document.getElementById('ai-input');
            const output = document.getElementById('ai-output');
            const prompt = input.value.trim();
            if (!prompt) return;

            output.innerHTML += `<div style="color:#0ff;">> ${prompt}</div><div style="color:#0f8;">AI: <span id="typing"></span></div>`;
            input.value = '';
            const typing = document.getElementById('typing');
            output.scrollTop = output.scrollHeight;

            try {
                const response = await fetch('https://spark-api-open.xf-yun.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}:${API_SECRET}`
                    },
                    body: JSON.stringify({
                        model: 'lite',
                        messages: [
                            { role: 'system', content: '你是矩阵中的AI助手，用简洁、科幻风格回答。' },
                            { role: 'user', content: prompt }
                        ],
                        stream: true,
                        max_tokens: 1024,
                        temperature: 0.7
                    })
                });

                if (!response.ok) throw new Error(`HTTP ${response.status}`);

                const reader = response.body.getReader();
                const decoder = new TextDecoder('utf-8');
                let buffer = '';

                while (true) {
                    const {done, value} = await reader.read();
                    if (done) break;
                    buffer += decoder.decode(value, {stream: true});
                    const lines = buffer.split('\n');
                    buffer = lines.pop();

                    for (let line of lines) {
                        if (line.startsWith('data: ')) {
                            const data = line.slice(6);
                            if (data === '[DONE]') continue;
                            try {
                                const json = JSON.parse(data);
                                const content = json.choices[0]?.delta?.content || '';
                                if (content) {
                                    typing.textContent += content;
                                    output.scrollTop = output.scrollHeight;
                                }
                            } catch (e) {}
                        }
                    }
                }
                typing.innerHTML += '<br><br>> 输入新问题...';
            } catch (err) {
                typing.textContent = `连接中断: ${err.message}`;
            }
        }
    </script>
</body>
</html>
